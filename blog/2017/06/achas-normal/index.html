<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Não encontras nada estranho? </title>
  
  <meta name="author" content="António Cruz" />
  
  <meta name="description" content="Benford&#39;s law" />
  
  <meta name="keywords" content="[Deteção de eventos anormais]" />
  

  <meta name="generator" content="Hugo 0.18" />

  <link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800' rel='stylesheet' type='text/css'>

  
  <script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:458558,hjsv:5};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'//static.hotjar.com/c/hotjar-','.js?sv=');
  </script>

  
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

  
  <link href="http://value-from-data.com/css/animate.css" rel="stylesheet">

  
  
    <link href="http://value-from-data.com/css/style.blue.css" rel="stylesheet" id="theme-stylesheet">
  


  
  <link href="http://value-from-data.com/css/custom.css" rel="stylesheet">

  
    

  
  <link rel="shortcut icon" href="http://value-from-data.com/img/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="http://value-from-data.com/img/apple-touch-icon.png" />
  

  <link href="http://value-from-data.com/css/owl.carousel.css" rel="stylesheet">
  <link href="http://value-from-data.com/css/owl.theme.css" rel="stylesheet">

  <link rel="alternate" href="http://value-from-data.com/index.xml" type="application/rss+xml" title="Melhores decisões">

  
  <meta property="og:title" content="Não encontras nada estranho?" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="/blog/2017/06/achas-normal//" />
  <meta property="og:image" content="img/logo.png" />

</head>


  <body>

    <div id="all">

        <header>

          <div class="navbar-affixed-top" data-spy="affix" data-offset-top="200">

    <div class="navbar navbar-default yamm" role="navigation" id="navbar">

        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand home" href="http://value-from-data.com/">
                    <img src="http://value-from-data.com/img/logo.png" alt="Não encontras nada estranho? logo" class="hidden-xs hidden-sm">
                    <img src="http://value-from-data.com/img/logo-small.png" alt="Não encontras nada estranho? logo" class="visible-xs visible-sm">
                    <span class="sr-only">Não encontras nada estranho? - go to homepage</span>
                </a>
                <div class="navbar-buttons">
                    <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse" data-target="#navigation">
                        <span class="sr-only">Toggle navigation</span>
                        <i class="fa fa-align-justify"></i>
                    </button>
                </div>
            </div>
            

            <div class="navbar-collapse collapse" id="navigation">
                <ul class="nav navbar-nav navbar-right">
                    
                    <li class="dropdown">
                        <a href="../../../../">Home</a>
                    </li>
                    
                    <li class="dropdown">
                        <a href="../../../../blog/">Blog</a>
                    </li>
                    
                    <li class="dropdown">
                        <a href="../../../../sobremim/">Sobre mim</a>
                    </li>
                    
                    <li class="dropdown">
                        <a href="../../../../contact/">Contactos</a>
                    </li>
                    
                </ul>
            </div>
            

            <div class="collapse clearfix" id="search">

                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search">
                        <span class="input-group-btn">

                    <button type="submit" class="btn btn-template-main"><i class="fa fa-search"></i></button>

                </span>
                    </div>
                </form>

            </div>
            

        </div>
    </div>
    

</div>




        </header>

        <div id="heading-breadcrumbs">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h1>Não encontras nada estranho?</h1>
            </div>
        </div>
    </div>
</div>


        <div id="content">
            <div class="container">

                <div class="row">

                    

                    <div class="col-md-9" id="blog-post">

                        <p class="text-muted text-uppercase mb-small text-right">By <a href="#">António Cruz</a> | June 5, 2017</p>

                        <div id="post-content">
                          <div id="bg">
<p><img align="left" style="width:13%;height:13%;margin:20px 30px" src="../../../../img/banners/detetive.png" alt=""></p>
</div>
<p>A deteção de situações anómalas é um objetivo recorrente a todo o tipo de organizações e em todas as áreas.</p>
<p>A análise de dados utiliza tecnologias para detetar anomalias, padrões e indicadores de risco num conjunto de dados.</p>
<p>Desde a deteção da fraude contabilística, à intrusão de sistemas digitais, falhas, erros ou a fabricação manual de evidências, são alguns dos exemplos onde podem ser utilizados algoritmos de deteção de situações anómalas.</p>
<p>Diversos tipos de algoritmos podem ser utilizados, em função do problema de negócio em causa, uns mais complexos do que outros e com diferentes graus de dificuldade de implementação.</p>
<p>Eu pessoalmente gosto das soluções simples e que podem produzir resultados rapidamente.</p>
<p>Por isso, vou vos falar num mecanismo bastante simples e com resultados surpreendentes. Já ouviram falar na <strong>Benford’s law</strong>? Não? Vocês é que ficam a perder.</p>
<p style="margin-bottom:50px;">
</p>
<font size="4" color="DarkGoldenRod"> <b> Benford’s law</b></font>
<p style="margin-bottom:20px;">
</p>
<p>Pensa-se que foi o matemático e astrónomo <em>Simon Newcomb</em>, em 1881, o primeiro a publicar um artigo sobre o fenómeno que mais tarde veio a ser conhecido por <strong>Benford’s law</strong> (vamos chamar-lhe lei de <strong>Benford</strong>).</p>
<p>Ele apercebeu-se que as primeiras páginas dos livros da biblioteca estavam muito mais usadas e que o desgaste ia diminuindo nas páginas com maiores dígitos. Ou seja, as páginas que começavam por 1 eram mais lidas que as que começavam por dígitos maiores.</p>
<p><strong>Newcomb</strong> não disponibilizou nenhuma teoria para a descoberta e passados 50 anos, aparentemente sem ligação à descoberta inicial, o físico <strong>Frank Benford</strong> também reparou que as primeiras páginas dos seus livros estavam mais gastas que as ultimas.</p>
<p>Perante a descoberta <strong>Benford</strong> testou a sua hipótese, que existiam naturalmente mais números que começavam por dígitos menores. Em mais de 20000 observações de eventos e factos tão distintos como a área dos rios, o peso atómico dos elementos, números que apareciam nos artigos do <strong>Reader’s Digest</strong>, etc, <strong>Benford</strong> provou a sua hipótese.</p>
<p>Essa distribuição que determina que os números menores aparecem com mais frequência que os maiores ficou conhecida como a lei de <strong>Benford</strong> e determina que a proporção de ocorrência dos números, neste caso para o primeiro digito, segue a seguinte distribuição:</p>
<p style="margin-bottom:10px;">
</p>
<p><img src="../../../../blog/achas-normal_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p style="margin-bottom:10px;">
</p>
<p>Ou seja, para números gerados <em>naturalmente</em> a percentagem de vezes em que o <strong>1</strong> aparece como primeiro digito deverá ser de 30.1%, o <strong>2</strong> deverá aparecer como primeiro digito em 17.6% das vezes, e assim sucessivamente.</p>
<p>O web site <a href="http://testingbenfordslaw.com/" target="_blank"> http://testingbenfordslaw.com/</a> coloca à prova a lei de <strong>Benford</strong> perante um conjunto diverso de dados como os seguidores de utilizadores no twitter, a população das cidades espanholas, a despesa do governo Inglês, número de moradas Brasileiras, o PIB real dos países, etc.</p>
<p>Tudo isto é muito interessante, mas perguntam vocês se isto tem alguma base cientifica que nos permita confiar numa análise deste tipo?</p>
<p>Durante mais de 90 anos matemáticos e estatísticos tentaram explicar tal fenómeno. Mas apenas em 1995 o matemático <strong>Hill</strong> forneceu uma explicação e demonstração do facto.</p>
<p>O que vos posso dizer é que a coisa funciona muito bem. Mesmo muito bem. Estranhamente muito bem. De tal forma que a técnica é cada vez mais utilizada, nomeadamente na auditoria forense.</p>
<p>Existem várias formas de aplicar a lei de <strong>Benford</strong>, nomeadamente ao primeiro digito, dois primeiros dígitos, 3 primeiros dígitos, 2 últimos dígitos ou números de segunda ordem. Existem também várias formas de determinar o nível de significância (se um conjunto de eventos estão, ou não, conformes com a regra) como sejam o teste do qui-quadrado, teste <strong>Kolmogorov–Smirnov</strong>, ou o teste de <strong>kuiper</strong>. No exemplo prático deste artigo irei analisar o primeiro digito e utilizarei o teste de <strong>Kolmogorov–Smirnov</strong> com um nível de significância de 5% para avaliar se a regra é ou não cumprida.</p>
<p>Não se pense, no entanto, que a técnica é uma panaceia para todos os males. Ela não se deve aplicar em determinadas situações, como por exemplo quando os números são atribuídos (códigos postais, número de faturas ou cheques, etc), quando existem níveis psicológicos nos preços (19.99 em vez de 20), quando existem limites naturais (altura de adultos), etc.</p>
<p>A técnica tem-se revelado particularmente eficaz na área contabilística quando os números resultam de combinações matemáticas (quantidade x preço unitário), e nas áreas das contas a receber e a pagar, faturação, despesas, etc.</p>
<p style="margin-bottom:50px;">
</p>
<font size="4" color="DarkGoldenRod"> <b> Aplicação à contratação pública </b></font>
<p style="margin-bottom:20px;">
</p>
<p>Para efeitos de exemplo prático irei utilizar os dados do portal <a href="http://www.base.gov.pt/Base/pt/Homepage" target="_blank"> Base</a>. Podem ler mais sobre a forma como os dados foram extraídos e processados neste <a href="http://value-from-data.com/blog/2017/04/teoria-grafos/" target="_blank"> artigo</a>.</p>
<p>Agora prestem atenção. Neste exemplo prático, tal como em qualquer outra situação, esta técnica deve ser utilizada em conjunto com outras e o resultado dela, por si, não significa que existe fraude, crime ou más práticas de gestão.</p>
<p>Mas um resultado positivo no teste deveria chamar a atenção dos responsáveis da organização, em primeiro lugar, para a avaliação das suas práticas de contratação, e, em segundo lugar, das entidades de controlo e inspetivas para uma possível auditoria.</p>
<p>Ou seja, um resultado positivo (os números divergem da distribuição de <strong>Benford</strong>) não tem um significado automático. Mas deveria, isso sim, despoletar uma análise mais cuidada para que se possa perceber as razões do verificado.</p>
<p>Um resultado negativo também não significa que está tudo bem, não é um aval ou certificação. Existem sempre casos de falsos positivos e falsos negativos.</p>
<p>Vamos começar por uma hipótese simples: os contratos celebrados em 2016 cumprem a lei de Benford, por tipo de procedimento?</p>
<p style="margin-bottom:10px;">
</p>
<img src="../../../../blog/achas-normal_files/figure-html/unnamed-chunk-3-1.png" width="912" />
<p style="margin-bottom:10px;">
</p>
<p>No gráfico as colunas representam a distribuição real e a linha vermelha a distribuição teórica segundo a lei de Benford.</p>
<p>Não foram considerados alguns tipos de procedimentos, como por exemplo os concursos limitados por prévia qualificação e os procedimentos de negociação, por terem muitos poucos contratos.</p>
<p>Podem também reparar que o ajuste direto e o concurso público não cumprem a regra segundo o teste de significância escolhido (teste de <strong>Kolmogorov–Smirnov</strong> com um nível de 5%), por uma boa razão. A maioria destes testes estatísticos é muito sensível quando o número de observações (neste caso, contratos) é muito pequeno ou muito grande. No caso do ajuste direto e do concurso público o número é enorme.</p>
<p>No entanto, o apresentado faz sentido do ponto de vista da perceção que temos da realidade pois os ajustes diretos têm limites de valor e estão mais sujeitos a valores menos <em>naturais</em>.</p>
<p>Mas a base de partida parece-me suficientemente boa para sermos mais específicos na nossa análise.</p>
<p>A partir deste momento os nossos dados apenas irão considerar os 4 tipo de procedimentos que estão no gráfico anterior:</p>
<ul>
<li><p>ajuste direto;</p></li>
<li><p>ao abrigo de acordo-quadro (artº 258º);</p></li>
<li><p>ao abrigo de acordo-quadro (artº 259º);</p></li>
<li><p>concurso público</p></li>
</ul>
<p>Vamos avaliar a lei e Benford por cliente.</p>
<p>Para o efeito irei apresentar 9 exemplos de clientes (escolhidos aleatóriamente) cujos contratos celebrados em 2016 cumprem a lei de Benford e que realizaram pelo menos 300 contratos.</p>
<p style="margin-bottom:10px;">
</p>
<p><img src="../../../../blog/achas-normal_files/figure-html/unnamed-chunk-4-1.png" width="912" /></p>
<p style="margin-bottom:10px;">
</p>
<p>Como podem verificar, mesmo não existindo uma sobreposição gráfica perfeita entre a distribuição real e a teórica, o teste de significância confirma o cumprimento da regra. Isso também acontece porque o número de contratos por entidade não é demasiado elevado o que a acontecer tornaria o teste muito sensível a qualquer variação relativamente à distribuição teórica.</p>
<p>O número de clientes cumpridores é muito maior, estes forma apenas exemplos para permitir avaliar o resultado.</p>
<p>Podemos também efetuar a mesma análise, agora para 9 exemplos de entidades cujos contratos realizados em 2016 não cumprem a lei de Benford.</p>
<p style="margin-bottom:10px;">
</p>
<p><img src="../../../../blog/achas-normal_files/figure-html/unnamed-chunk-5-1.png" width="912" /></p>
<p style="margin-bottom:10px;">
</p>
<p>Mais uma vez realço que este resultado não permite concluir que nos exemplos apresentados existiu fraude, crime ou má pratica de gestão. Mas julgo que seria prudente uma avaliação mais detalhada e cuidada por parte dos interessados, na sua política de contratação pública.</p>
<p>A partir deste momento poderiamos aplicar a mesma metodologia por fornecedor, ou outro agrupamento que fosse adequado ao objetivo pretendido.</p>
<p>Para finalizar apresento um gráfico que identifica os clientes com mais de 50 contratos celebrados em 2016, considerando apenas os 4 tipos de procedimento indicados anteriormente.</p>
<p style="margin-bottom:10px;">
</p>
<p><img src="../../../../blog/achas-normal_files/figure-html/unnamed-chunk-6-1.png" width="912" /></p>
<p style="margin-bottom:10px;">
</p>
<p>Cada ponto representa um cliente e os pontos acima da diagonal cumprem a lei de <strong>Benford</strong>.</p>
<p>Apesar da maioria dos clientes cumprir a regra, existem muitos onde tal não acontece.</p>
<p style="margin-bottom:50px;">
</p>
<font size="4" color="DarkGoldenRod"> <b> Conclusões</b></font>
<p style="margin-bottom:20px;">
</p>
<p>A lei de <strong>Benford</strong> é uma ferramenta bastante útil para detetar situações merecedoras de uma análise mais cuidada e detalhada.</p>
<p>Permite otimizar recursos ao destacar, num grande volume de dados e de forma simples e rápida, as situações merecedoras de tratamento especial.</p>
<p>Os níveis de significãncia estatística são flexíveis e podem ser otimizados com a experiência e objetivos pretendidos.</p>
<p>Quando conjudado com outras ferramentas de análise de dados, podem ser alcançados resultados bastante válidos.</p>

                        </div>
                        
							  
		<div class="a2a_kit a2a_kit_size_32 a2a_default_style">
		<a class="a2a_button_facebook"></a>
		<a class="a2a_button_twitter"></a>
		<a class="a2a_button_google_plus"></a>
		<a class="a2a_button_linkedin"></a>
		<a class="a2a_button_email"></a>
		</div>
	  
                        
                        <div id="comments">
                            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'value-from-data';
    var disqus_identifier = 'http:\/\/value-from-data.com\/blog\/2017\/06\/achas-normal\/';
    var disqus_title = 'Não encontras nada estranho?';
    var disqus_url = 'http:\/\/value-from-data.com\/blog\/2017\/06\/achas-normal\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                        </div>
                        

                    </div>
                    

                    

                    

                    <div class="col-md-3">

                        

                        

<div class="panel panel-default sidebar-menu">

    <div class="panel-heading">
        <h3 class="panel-title">Search</h3>
    </div>

    <div class="panel-body">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" role="search">
            <div class="input-group">
                <input type="search" name="q" results="0" class="form-control" placeholder="Search">
                <input type="hidden" name="q" value="site:http://value-from-data.com/">
                <span class="input-group-btn">
                    <button type="submit" class="btn btn-template-main"><i class="fa fa-search"></i></button>
                </span>
            </div>
        </form>
    </div>
</div>







<div class="panel panel-default sidebar-menu">

    <div class="panel-heading">
        <h3 class="panel-title">Categories</h3>
    </div>

    <div class="panel-body">
        <ul class="nav nav-pills nav-stacked">
            
            <li><a href="http://value-from-data.com/categories/anormaly-detection">anormaly-detection (1)</a>
            </li>
            
            <li><a href="http://value-from-data.com/categories/competi%c3%a7%c3%b5es">competições (2)</a>
            </li>
            
            <li><a href="http://value-from-data.com/categories/exemplos">exemplos (1)</a>
            </li>
            
            <li><a href="http://value-from-data.com/categories/geral">geral (4)</a>
            </li>
            
        </ul>
    </div>
</div>








<div class="panel sidebar-menu">
    <div class="panel-heading">
        <h3 class="panel-title">Tags</h3>
    </div>

    <div class="panel-body">
        <ul class="tag-cloud">
            
            <li><a href="http://value-from-data.com/tags/comportamentos-anormais"><i class="fa fa-tags"></i> comportamentos-anormais</a>
            </li>
            
            <li><a href="http://value-from-data.com/tags/conceitos"><i class="fa fa-tags"></i> conceitos</a>
            </li>
            
            <li><a href="http://value-from-data.com/tags/contrata%c3%a7%c3%a3o-publica"><i class="fa fa-tags"></i> contratação-publica</a>
            </li>
            
            <li><a href="http://value-from-data.com/tags/dete%c3%a7%c3%a3o-de-fraudes"><i class="fa fa-tags"></i> deteção-de-fraudes</a>
            </li>
            
            <li><a href="http://value-from-data.com/tags/grafos"><i class="fa fa-tags"></i> grafos</a>
            </li>
            
            <li><a href="http://value-from-data.com/tags/intelig%c3%aancia-artificial"><i class="fa fa-tags"></i> inteligência-artificial</a>
            </li>
            
            <li><a href="http://value-from-data.com/tags/kaggle"><i class="fa fa-tags"></i> kaggle</a>
            </li>
            
            <li><a href="http://value-from-data.com/tags/processamento-de-texto"><i class="fa fa-tags"></i> processamento-de-texto</a>
            </li>
            
            <li><a href="http://value-from-data.com/tags/regress%c3%a3o"><i class="fa fa-tags"></i> regressão</a>
            </li>
            
            <li><a href="http://value-from-data.com/tags/simula%c3%a7%c3%a3o"><i class="fa fa-tags"></i> simulação</a>
            </li>
            
            <li><a href="http://value-from-data.com/tags/visualiza%c3%a7%c3%a3o"><i class="fa fa-tags"></i> visualização</a>
            </li>
            
        </ul>
    </div>
</div>






                        

                    </div>
                    

                    

                </div>
                

            </div>
            
        </div>
        

        <!-- Footer section -->
<footer>
  <div class="container">
  <hr> <br>

    <div class="row">
      <div class="col-md-4">
        <span class="copyright">Copyright &copy; 2017, value-from-data; all rights reserved.</span>
      </div>
      <div class="col-md-4 text-center">
        <ul class="list-inline social-buttons">
          


































<li><a href="//linkedin.com/in/antonio-a-cruz" target="_blank" title="LinkedIn" class="fa fa-linkedin fa-lg"></a></li>













<li><a href="//facebook.com/value.from.data.portugal" target="_blank" title="Facebook" class="fa fa-facebook fa-lg"></a></li>



<li><a href="//twitter.com/antonioacruz" target="_blank" title="Twitter" class="fa fa-twitter fa-lg"></a></li>




        </ul>
      </div>
      <div class="col-md-4">
        <ul class="list-inline quicklinks">
          
            <li><a href="https://github.com/devcows/hugo-universal-theme">Base template from DevCows</a></li>
          
            <li><a href="http://www.value-from-data.com/sobremim">Modified by António Cruz</a></li>
          

        </ul>
      </div>
    </div>
  </div>
</footer>


    </div>
    

    
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-89291403-1', 'auto');
ga('send', 'pageview');
</script>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.5/waypoints.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js"></script>

<script src="//maps.googleapis.com/maps/api/js?v=3.exp"></script>
<script src="http://value-from-data.com/js/hpneo.gmaps.js"></script>
<script src="http://value-from-data.com/js/gmaps.init.js"></script>
<script src="http://value-from-data.com/js/front.js"></script>
<script src="http://value-from-data.com/js/functions.js"></script>
<script src="http://value-from-data.com/js/agency.js"></script>
<script src="http://value-from-data.com/js/add_page.js"></script>


<script src="http://value-from-data.com/js/owl.carousel.min.js"></script>


  </body>
</html>
